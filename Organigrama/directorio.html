<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Directorio LAV ESTE</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://unpkg.com/@tailwindcss/typography@0.5.9/dist/typography.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@tarekraafat/autocomplete.js@10.2.7/dist/autoComplete.min.js"></script>
    <style>
        /* Estilos para los logos */
        .logo-adif {
            position: absolute;
            top: 20px;
            left: 20px;
            width: 120px;
            height: auto;
            z-index: 20;
        }
        
        .logo-ineco {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 120px;
            height: auto;
            z-index: 20;
        }
        
        .adif-logo {
            background-image: url('https://www.adifaltavelocidad.es/documents/34745/2553140/Logo_Adif_AV_verde_351x170.png/aa356add-9b30-836e-8d9f-276eb02d17cf?t=1617203111419&download=true');
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
        }
        
        .ineco-logo {
            background-image: url('https://www.ineco.com/ineco/sites/default/files/2022-12/Logo%20Ineco.png');
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
        }
        
        .location-header {
            background: linear-gradient(90deg, rgba(0,82,147,1) 0%, rgba(0,128,128,1) 100%);
            color: white;
            transition: all 0.3s ease;
        }
        
        .location-header:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        
        .contact-card {
            padding: 1.5rem;
            border-radius: 1rem;
            background-color: white;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            border-left: 6px solid #008080; /* Color por defecto para ADIF */
        }

        .contact-card.ineco {
            border-left: 6px solid #005293; /* Color específico para INECO */
        }

        .contact-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 12px rgba(0,0,0,0.1);
        }
        
        .company-logo {
            position: absolute;
            top: -1rem;
            right: 0;
            width: 6rem;
            height: 6rem;
            border-radius: 1rem;
        }
        
        .contact-avatar {
            width: 4rem;
            height: 4rem;
            border-radius: 50%;
            background-color: #008080;
            color: white;
            font-size: 1.5rem;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .contact-avatar:hover {
            background-color: #005293;
            transform: scale(1.1);
        }
        
        .contact-info {
            margin-left: 1rem;
            flex: 1;
        }
        
        .contact-name {
            font-size: 1.125rem;
            font-weight: 600;
        }
        
        .contact-position {
            color: #64748b;
            font-size: 0.875rem;
        }
        
        .contact-details {
            margin-top: 0.5rem;
            color: #64748b;
            font-size: 0.875rem;
        }
        
        .contact-badge {
            display: inline-flex;
            align-items: center;
            padding: 0.25rem 0.5rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 500;
        }
        
        .badge-adif {
            background-color: #008080;
            color: white;
        }
        
        .badge-ineco {
            background-color: #2196F3;
            color: white;
        }
        
        .contact-card:hover {
            transform: translateY(-5px) rotateX(2deg);
            box-shadow: 0 15px 30px rgba(0,0,0,0.1);
            background: rgba(255, 255, 255, 0.95);
        }
        
        .search-container {
            background: linear-gradient(135deg, #f0f9ff 0%, #e6f7ff 100%);
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        
        .search-input {
            @apply w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#005293] focus:border-[#005293] transition;
        }
        
        .search-suggestion {
            @apply px-3 py-1 bg-gray-100 text-sm rounded-full hover:bg-[#005293] hover:text-white transition cursor-pointer;
        }
        
        .contact-card {
            @apply p-4 rounded-lg shadow-md hover:shadow-lg transition-all duration-300 bg-white;
        }
        
        .contact-card-header {
            @apply flex items-center justify-between mb-3;
        }
        
        .contact-avatar {
            @apply w-12 h-12 rounded-full flex items-center justify-center bg-[#008080] text-white text-xl font-bold;
        }
        
        .contact-info {
            @apply space-y-2;
        }
        
        .contact-details {
            @apply grid grid-cols-2 gap-2 text-sm;
        }
        
        .contact-detail-label {
            @apply font-medium text-gray-600;
        }
        
        .contact-detail-value {
            @apply text-gray-900;
        }
        
        .contact-actions {
            @apply flex gap-2 mt-4;
        }
        
        .action-button {
            @apply px-3 py-1 rounded-md text-sm hover:bg-gray-100 transition;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .animate-fade-in {
            animation: fadeIn 0.3s ease-out forwards;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <div class="container mx-auto px-4 py-8 relative">
        <header class="mb-10 text-center relative z-10">
            <!-- Logo ADIF -->
            <img src="https://www.adifaltavelocidad.es/documents/34745/2553140/Logo_Adif_AV_verde_351x170.png/aa356add-9b30-836e-8d9f-276eb02d17cf?t=1617203111419&download=true" alt="ADIF" class="logo-adif absolute top-0 left-0 w-48">
            <!-- Logo INECO -->
            <img src="https://www.ineco.com/ineco/sites/default/files/2022-12/Logo%20Ineco.png" alt="INECO" class="logo-ineco absolute top-0 right-0 w-44 h-21.5 mt-2">
            <a href="#" class="text-4xl font-bold text-[#005293] mb-2 hover:text-[#008080] transition-colors">Directorio de Contactos</a>
            <h2 class="text-2xl font-semibold text-[#008080]">Equipo de Mantenimiento - Línea de Alta Velocidad Eje Este</h2>
            <div class="w-24 h-1 bg-[#008080] mx-auto mt-4 rounded-full"></div>
        </header>

        <div class="flex justify-center mb-6">
            <div class="flex gap-4">
                <button onclick="window.location.href='index.html'" class="px-4 py-2 bg-[#008080] text-white rounded-md hover:bg-[#005293] transition-colors">
                    ORGANIGRAMA
                </button>
                <button onclick="window.location.href='mapa.html'" class="px-4 py-2 bg-[#008080] text-white rounded-md hover:bg-[#005293] transition-colors">
                    MAPA
                </button>
            </div>
        </div>

        <div class="search-container p-6 mb-10 shadow-md">
            <div class="flex flex-col md:flex-row gap-4 items-center">
                <div class="flex-1 w-full">
                    <label for="searchInput" class="block text-sm font-medium text-gray-700 mb-1">Buscar contacto:</label>
                    <div class="relative">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <i class="fas fa-search text-gray-400"></i>
                        </div>
                        <input type="text" id="searchInput" placeholder="Buscar por nombre, puesto, ubicación..." 
                               class="pl-10 pr-10 w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#005293] focus:border-[#005293] transition">
                        <button type="button" id="clearSearch" class="absolute inset-y-0 right-0 w-8 h-8 flex items-center justify-center cursor-pointer text-gray-500 hover:text-red-500 transition-colors duration-200 rounded-r-lg border border-transparent hover:border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#005293] focus:ring-offset-2">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
                <div class="w-full md:w-auto">
                    <label for="locationFilter" class="block text-sm font-medium text-gray-700 mb-1">Filtrar por ubicación:</label>
                    <select id="locationFilter" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#005293] focus:border-[#005293] transition">
                        <option value="">Todas las ubicaciones</option>
                        <option value="Madrid - Paseo del Rey">Madrid - Paseo del Rey</option>
                        <option value="Villaverde">Villaverde</option>
                        <option value="Madrid Sur">Madrid Sur</option>
                        <option value="BM Villarrubia">BM Villarrubia</option>
                        <option value="BM Requena">BM Requena</option>
                        <option value="BM Gabaldón">BM Gabaldón</option>
                        <option value="BM Monforte">BM Monforte</option>
                        <option value="ET Albacete">ET Albacete</option>
                        <option value="Estación Valencia">Estación Valencia</option>
                        <option value="ET Valencia">ET Valencia</option>
                        <option value="CRC Albacete">CRC Albacete</option>
                    </select>
                </div>
            </div>
            <div class="mt-4 flex flex-wrap gap-2">
                <span class="text-sm text-gray-600 flex items-center">Sugerencias:</span>
                <!-- Roles -->
                <button class="search-suggestion px-3 py-1 bg-gray-100 text-sm rounded-full hover:bg-[#005293] hover:text-white transition">Jefe de Área</button>
                <button class="search-suggestion px-3 py-1 bg-gray-100 text-sm rounded-full hover:bg-[#005293] hover:text-white transition">Jefe de Base</button>
                <button class="search-suggestion px-3 py-1 bg-gray-100 text-sm rounded-full hover:bg-[#005293] hover:text-white transition">Jefe de Unidad</button>
                <button class="search-suggestion px-3 py-1 bg-gray-100 text-sm rounded-full hover:bg-[#005293] hover:text-white transition">Técnico de Infra y Vía</button>
                <button class="search-suggestion px-3 py-1 bg-gray-100 text-sm rounded-full hover:bg-[#005293] hover:text-white transition">Técnico Documentalista</button>
                <button class="search-suggestion px-3 py-1 bg-gray-100 text-sm rounded-full hover:bg-[#005293] hover:text-white transition">Teleco</button>
                <button class="search-suggestion px-3 py-1 bg-gray-100 text-sm rounded-full hover:bg-[#005293] hover:text-white transition">II.SS.</button>
                
                <!-- Empresas -->
                <button class="search-suggestion px-3 py-1 bg-gray-100 text-sm rounded-full hover:bg-[#005293] hover:text-white transition">INECO</button>
                <button class="search-suggestion px-3 py-1 bg-gray-100 text-sm rounded-full hover:bg-[#005293] hover:text-white transition">ADIF</button>
                
                <!-- Términos comunes -->
                <button class="search-suggestion px-3 py-1 bg-gray-100 text-sm rounded-full hover:bg-[#005293] hover:text-white transition">Coordinador</button>
                <button class="search-suggestion px-3 py-1 bg-gray-100 text-sm rounded-full hover:bg-[#005293] hover:text-white transition">C.T. Ingeniería Civil</button>
            </div>
        </div>
        
        <div id="contactsContainer">
            <div id="contactsContainer" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Contacts will be dynamically inserted here by JavaScript -->
            </div>
        </div>
        
        <div id="noResults" class="hidden text-center py-10">
            <i class="fas fa-search text-4xl text-gray-300 mb-4"></i>
            <h3 class="text-xl font-medium text-gray-500">No se encontraron resultados</h3>
            <p class="text-gray-400">Intenta con otros términos de búsqueda</p>
        </div>
    </div>

    <script>
        // Función para generar avatar inicial
        function getAvatarInitials(name) {
            return name.split(' ').map(word => word[0].toUpperCase()).join('');
        }

        // Función para formatear el teléfono
        function formatPhone(phone) {
            return phone.replace(/(\d{3})(\d{3})(\d{3})/, '$1 $2 $3');
        }

        const contacts = [
            // Madrid - Paseo del Rey
            {
                ubicacion: "Madrid - Paseo del Rey",
                nombre: "Mario García Aguado",
                puesto: "Jefe de Área",
                correo: "mgarciaaguado@adif.es",
                telefono: "647923080",
                empresa: "ADIF"
            },
            {
                ubicacion: "Madrid - Paseo del Rey",
                nombre: "Lourdes Mirasierra Pérez",
                puesto: "Secretaria",
                correo: "lmirasierra@externos.adif.es",
                telefono: "628895465"
            },
            {
                ubicacion: "Madrid - Paseo del Rey",
                nombre: "Pedro Luis Miguel Sánchez",
                puesto: "Coordinador de Línea",
                correo: "pedro.miguel@ineco.com",
                telefono: "661287618"
            },
            {
                ubicacion: "Madrid - Paseo del Rey",
                nombre: "Manuel Tirado Domínguez",
                puesto: "Técnico II.SS.",
                correo: "mtirado@adif.es",
                telefono: "647615303"
            },
            {
                ubicacion: "Madrid - Paseo del Rey",
                nombre: "Samuel García Chaparro",
                puesto: "Técnico Telecomunicaciones",
                correo: "sgarciac@adif.es",
                telefono: "647813678"
            },
            {
                ubicacion: "Madrid - Paseo del Rey",
                nombre: "Héctor Sanz Mateos",
                puesto: "Técnico Infra y Vía Línea",
                correo: "hector.sanz@ineco.com",
                telefono: "687940736"
            },
            
            // Madrid Sur
            {
                ubicacion: "Madrid Sur",
                nombre: "Alberto Sanz Berges",
                puesto: "Técnico Energía",
                correo: "alberto.berges@ineco.com",
                telefono: "662676920"
            },
            {
                ubicacion: "Madrid Sur",
                nombre: "David Moreta Jiménez",
                puesto: "Técnico II.SS.",
                correo: "david.moreta@ineco.com",
                telefono: "661262136"
            },
            {
                ubicacion: "Madrid Sur",
                nombre: "David Garcia Pérez",
                puesto: "Técnico de Proteccion Civil",
                correo: "david.garcia2@ineco.com",
                telefono: "618990207"
            },
            
            // BM Villarrubia
            {
                ubicacion: "BM Villarrubia",
                nombre: "PTE NOMBRAMIENTO",
                puesto: "Pendiente de nombramiento",
                correo: "Pendiente de nombramiento",
                telefono: "Pendiente de nombramiento"
            },
            {
                ubicacion: "BM Villarrubia",
                nombre: "Javier Gambin Ortuño",
                puesto: "C.T. Ingeniería Civil",
                correo: "javier.gambin@adif.es",
                telefono: "610165651"
            },
            {
                ubicacion: "BM Villarrubia",
                nombre: "Juan José Recio Lanchas",
                puesto: "Jefe de Unidad",
                correo: "juan.recio@ineco.com",
                telefono: "659727779"
            },
            {
                ubicacion: "BM Villarrubia",
                nombre: "Silvia García Maroto",
                puesto: "Técnico Documentalista",
                correo: "silvia.maroto@ineco.com",
                telefono: "683656405"
            },
            {
                ubicacion: "BM Villarrubia",
                nombre: "Manuel García Díaz",
                puesto: "Técnico De Inversiones",
                correo: "mgarcia.diaz@ineco.com",
                telefono: "610670612"
            },
            {
                ubicacion: "BM Villarrubia",
                nombre: "Jesús Fernández Avilés",
                puesto: "Técnico Proyectos y Explanaciones",
                correo: "jesus.garciadelarosa@ineco.com",
                telefono: "690110855"
            },
            {
                ubicacion: "BM Villarrubia",
                nombre: "Felix Pestana",
                puesto: "Técnico De Infra y Vía",
                correo: "ruben.anton@ineco.com",
                telefono: "628715029"
            },
            {
                ubicacion: "BM Villarrubia",
                nombre: "Víctor Solana Ortíz",
                puesto: "Técnico De Infra y Vía",
                correo: "victor.solana@ineco.com",
                telefono: "676655220"
            },
            {
                ubicacion: "BM Villarrubia",
                nombre: "Gregorio Ramos Córdoba",
                puesto: "Técnico De Infra y Vía",
                correo: "gregorio.ramos@ineco.com",
                telefono: "670555183"
            },
            {
                ubicacion: "BM Villarrubia",
                nombre: "Luis Martín del Valle Soria",
                puesto: "Técnico De Infra y Vía",
                correo: "luis.martin@ineco.com",
                telefono: "660722020"
            },
            {
                ubicacion: "BM Villarrubia",
                nombre: "Álvaro Barahona Serrano",
                puesto: "Técnico De Infra y Vía",
                correo: "alvaro.barahona@ineco.com",
                telefono: "647985585"
            },
            {
                ubicacion: "BM Villarrubia",
                nombre: "José A. De la Casa",
                puesto: "Técnico De Infra y Vía",
                correo: "jose.delacasa@ineco.com",
                telefono: "661242679"
            },
            
            // BM Requena
            {
                ubicacion: "BM Requena",
                nombre: "Jesús Valero Núñez",
                puesto: "Jefe de Base",
                correo: "jvaleronunez@adif.es",
                telefono: "678281833"
            },
            {
                ubicacion: "BM Requena",
                nombre: "Santiago Ferri Mateu",
                puesto: "C.T. Ingeniería Civil",
                correo: "sferri@adif.es",
                telefono: "610165643"
            },
            {
                ubicacion: "BM Requena",
                nombre: "Ramiro De Arriba Ramírez",
                puesto: "Jefe de Unidad",
                correo: "ramiro.arriba@ineco.com",
                telefono: "629156879"
            },
            {
                ubicacion: "BM Requena",
                nombre: "Antonio Pérez Gil",
                puesto: "Técnico Proyectos y Explanaciones",
                correo: "antonio.gil@ineco.com",
                telefono: "636276615"
            },
            {
                ubicacion: "BM Requena",
                nombre: "José Molto Gallego",
                puesto: "Técnico De Inversiones",
                correo: "jose.molto@ineco.com",
                telefono: "647392942"
            },
            {
                ubicacion: "BM Requena",
                nombre: "Marco Salinas Medina",
                puesto: "Técnico Documentalista",
                correo: "marco.salinas@ineco.com",
                telefono: "670566166"
            },
            {
                ubicacion: "BM Requena",
                nombre: "José Ramón Hernández Vaquero",
                puesto: "Técnico De Infra y Vía",
                correo: "jose.vaquero@ineco.com",
                telefono: "674816629"
            },
            {
                ubicacion: "BM Requena",
                nombre: "Jose Rafael Rodríguez Álvarez",
                puesto: "Técnico De Infra y Vía",
                correo: "jrafael.rodriguez@ineco.com",
                telefono: "661214168"
            },
            {
                ubicacion: "BM Requena",
                nombre: "Santiago Morán Pérez",
                puesto: "Técnico De Infra y Vía",
                correo: "santiago.moran@ineco.com",
                telefono: "696511081"
            },
            {
                ubicacion: "BM Requena",
                nombre: "Antonio Valero Arrazola",
                puesto: "Técnico De Infra y Vía",
                correo: "antonio.valero@ineco.com",
                telefono: "627788481"
            },
            {
                ubicacion: "BM Requena",
                nombre: "José Martínez Gómez",
                puesto: "Técnico De Infra y Vía",
                correo: "luis.martinez@ineco.com",
                telefono: "696874294"
            },
            {
                ubicacion: "BM Requena",
                nombre: "Jorge García-Bermejo Morcillo",
                puesto: "Técnico De Infra y Vía",
                correo: "jorge.garcia-bermejo@ineco.com",
                telefono: "662078928"
            },
            {
                ubicacion: "BM Requena",
                nombre: "Manuel Jesús Del Pino García",
                puesto: "Técnico Energía",
                correo: "manueljesus.delpino@ineco.com",
                telefono: "647982300"
            },
            
            // BM Gabaldón
            {
                ubicacion: "BM Gabaldón",
                nombre: "Jesús Peña Cañada",
                puesto: "Jefe de Base",
                correo: "jpenacanada@adif.es",
                telefono: "647981929"
            },
            {
                ubicacion: "BM Gabaldón",
                nombre: "Vicente Tortajada Rosa",
                puesto: "C.T. Ingeniería Civil",
                correo: "vtortajada@adif.es",
                telefono: "610165636"
            },
            {
                ubicacion: "BM Gabaldón",
                nombre: "José Luis López Marco",
                puesto: "Jefe de Unidad",
                correo: "jose.marco@ineco.com",
                telefono: "687940499"
            },
            {
                ubicacion: "BM Gabaldón",
                nombre: "Roberto Díaz Herráiz",
                puesto: "Técnico De Inversiones",
                correo: "rdiaz.herraiz@ineco.com",
                telefono: "630742491"
            },
            {
                ubicacion: "BM Gabaldón",
                nombre: "Antonio Olivares Nieto",
                puesto: "Técnico De Inversiones",
                correo: "antonio.olivares@ineco.com",
                telefono: "608420275"
            },
            {
                ubicacion: "BM Gabaldón",
                nombre: "Jaime Checa Migallón",
                puesto: "Técnico Proyectos y Explanaciones",
                correo: "jaime.checa@ineco.com",
                telefono: "689177492"
            },
            {
                ubicacion: "BM Gabaldón",
                nombre: "Patricia Macías de la Cuadra",
                puesto: "Técnico Documentalista",
                correo: "patricia.macias@ineco.com",
                telefono: "663938459"
            },
            {
                ubicacion: "BM Gabaldón",
                nombre: "Antonio Briz Piqueras",
                puesto: "Técnico De Infra y Vía",
                correo: "antonio.briz@ineco.com",
                telefono: "661253512"
            },
            {
                ubicacion: "BM Gabaldón",
                nombre: "Jose Luis Escobar",
                puesto: "Técnico De Infra y Vía",
                correo: "jose.escobar@ineco.com",
                telefono: "671335029"
            },
            {
                ubicacion: "BM Gabaldón",
                nombre: "José Núñez González",
                puesto: "Técnico De Infra y Vía",
                correo: "jose.nuñez@ineco.com",
                telefono: "661283459"
            },
            {
                ubicacion: "BM Gabaldón",
                nombre: "Juan Luis Campos Pareja",
                puesto: "Técnico De Infra y Vía",
                correo: "juan.campos@ineco.com",
                telefono: "661302486"
            },
            {
                ubicacion: "BM Gabaldón",
                nombre: "Mario Viejobueno",
                puesto: "Técnico De Infra y Vía",
                correo: "mario.viejobueno@ineco.com",
                telefono: "626906332"
            },
            {
                ubicacion: "BM Gabaldón",
                nombre: "Vicente Gómez Morcillo",
                puesto: "Técnico De Infra y Vía",
                correo: "vicente.morcillo@ineco.com",
                telefono: "680759505"
            },
            
            // Estación Valencia
            {
                ubicacion: "Estación Valencia",
                nombre: "Esther Lorente Llenderrozas",
                puesto: "Técnico II.SS.",
                correo: "elorente@adif.es",
                telefono: "610541772"
            },
            
            // ET Valencia
            {
                ubicacion: "ET Valencia",
                nombre: "Raul Ureña Marcos",
                puesto: "Técnico Telecomunicaciones",
                correo: "raul.urena@ineco.com",
                telefono: "661279273"
            },
            
            // Villaverde
            {
                ubicacion: "Villaverde",
                nombre: "Carlos Barrera Piqueres",
                puesto: "Técnico Telecomunicaciones",
                correo: "carlos.barrera@ineco.com",
                telefono: "649129443"
            },
            
            // ET Valencia
            {
                ubicacion: "ET Valencia",
                nombre: "José Antonio García López",
                puesto: "Técnico II.SS.",
                correo: "antonio.lopez@ineco.com",
                telefono: "680740828"
            },
            
            // ET Albacete
            {
                ubicacion: "ET Albacete",
                nombre: "Jose Manuel Señorans Rodriguez",
                puesto: "Técnico Energía",
                correo: "jsenorans@adif.es",
                telefono: "647377997"
            },
            {
                ubicacion: "ET Albacete",
                nombre: "Victor José Castillo Arenas",
                puesto: "C.T. Ingeniería Industrial",
                correo: "victorjose.castillo@adif.es",
                telefono: "610165678"
            },
            {
                ubicacion: "ET Albacete",
                nombre: "Juan Gil Fernández",
                puesto: "Técnico Análisis Incidencias",
                correo: "juan.fernandez@ineco.com",
                telefono: "687430767"
            },
            {
                ubicacion: "ET Albacete",
                nombre: "Ramón Rada Collado",
                puesto: "Técnico Energía",
                correo: "ramon.rada@ineco.com",
                telefono: "661281078"
            },
            
            // BM Monforte
            {
                ubicacion: "BM Monforte",
                nombre: "Juan Pablo Rodriguez De La Fuente",
                puesto: "Jefe de Base",
                correo: "jrodriguezdelafuente@adif.es",
                telefono: "609120363"
            },
            {
                ubicacion: "BM Monforte",
                nombre: "Iván De La Paz Notario",
                puesto: "Técnico Telecomunicaciones",
                correo: "ivan.delapaz@ineco.com",
                telefono: "661350124"
            },
            {
                ubicacion: "BM Monforte",
                nombre: "Pascual Terol Ramos",
                puesto: "Técnico II.SS.",
                correo: "pascual.terol@ineco.com",
                telefono: "669488342"
            },
            {
                ubicacion: "BM Monforte",
                nombre: "Ernesto Botella Diez",
                puesto: "Jefe de Unidad",
                correo: "ernesto.botella@ineco.com",
                telefono: "609645159"
            },
            {
                ubicacion: "BM Monforte",
                nombre: "Gloria Jover Escolano",
                puesto: "Técnico De Inversiones",
                correo: "maria.jover@ineco.com",
                telefono: "619821783"
            },
            {
                ubicacion: "BM Monforte",
                nombre: "Irene Cuerda Berbel",
                puesto: "Técnico Documentalista",
                correo: "irene.cuerda@ineco.com",
                telefono: "699173798"
            },
            {
                ubicacion: "BM Monforte",
                nombre: "José Luis Martín Mendoza",
                puesto: "Técnico Proyectos y Explanaciones",
                correo: "jose.mendoza@ineco.com",
                telefono: "661350175"
            },
            {
                ubicacion: "BM Monforte",
                nombre: "Jose Antonio Córdoba Vega",
                puesto: "Técnico De Infra y Vía",
                correo: "jose.cordoba@ineco.com",
                telefono: "661350206"
            },
            {
                ubicacion: "BM Monforte",
                nombre: "Raúl Delgado Sánchez",
                puesto: "Técnico De Infra y Vía",
                correo: "raul.delgado@ineco.com",
                telefono: "619382698"
            },
            {
                ubicacion: "BM Monforte",
                nombre: "Manuel Ureña Muñoz",
                puesto: "Técnico De Infra y Vía",
                correo: "manuel.urena@ineco.com",
                telefono: "620830193"
            },
            {
                ubicacion: "BM Monforte",
                nombre: "Eduardo Cremades Henche",
                puesto: "Técnico De Infra y Vía",
                correo: "eduardo.cremades@ineco.com",
                telefono: "647372545"
            },
            {
                ubicacion: "BM Monforte",
                nombre: "Ana Mª Codes Alarcón",
                puesto: "Técnico De Infra y Vía",
                correo: "ana.codes@ineco.com",
                telefono: "662515177"
            },
            {
                ubicacion: "BM Monforte",
                nombre: "Iván Álvarez Pérez",
                puesto: "Técnico De Infra y Vía",
                correo: "ivan.alvarez@ineco.com",
                telefono: "682200164"
            },
            
            // CRC Albacete
            {
                ubicacion: "CRC Albacete",
                nombre: "José María Bañón Honrubia",
                puesto: "Operador CSI",
                correo: "jose.honrubia@ineco.com",
                telefono: "967539504"
            },
            {
                ubicacion: "CRC Albacete",
                nombre: "José Ángel Cerezuela Rodenas",
                puesto: "Operador CSI",
                correo: "jose.cerezuela@ineco.com",
                telefono: "967539504"
            },
            {
                ubicacion: "CRC Albacete",
                nombre: "Gabriel García Morote",
                puesto: "Operador CSI",
                correo: "gabriel.morote@ineco.com",
                telefono: "967539504"
            },
            {
                ubicacion: "CRC Albacete",
                nombre: "Catalina Alexandra Mendoza López",
                puesto: "Operador CSI",
                correo: "catalina.mendoza@ineco.com",
                telefono: "967539504"
            },
            {
                ubicacion: "CRC Albacete",
                nombre: "Adrián Ortega Iglesias",
                puesto: "Operador CSI",
                correo: "adrian.iglesias@ineco.com",
                telefono: "967539504"
            },
            {
                ubicacion: "CRC Albacete",
                nombre: "Rada Collado Pablo Roberto",
                puesto: "Operador CSI",
                correo: "pablo.rada@ineco.com",
                telefono: "967539504"
            },
            {
                ubicacion: "CRC Albacete",
                nombre: "Óscar Játiva Paterna",
                puesto: "Operador Telemando",
                correo: "oscar.jativa@ineco.com",
                telefono: "967539503"
            },
            {
                ubicacion: "CRC Albacete",
                nombre: "Alberto López Lorenzo",
                puesto: "Operador Telemando",
                correo: "alberto.lopez@ineco.com",
                telefono: "967539503"
            },
            {
                ubicacion: "CRC Albacete",
                nombre: "Gracia Requena Pérez",
                puesto: "Operador Telemando",
                correo: "gracia.requena@ineco.com",
                telefono: "967539503"
            },
            {
                ubicacion: "CRC Albacete",
                nombre: "Gerardo Moya Ortiz",
                puesto: "Operador Telemando",
                correo: "gerardo.moya@ineco.com",
                telefono: "967539503"
            },
            {
                ubicacion: "CRC Albacete",
                nombre: "Jorge Jarabo Tevar",
                puesto: "Operador Telemando",
                correo: "jorge.jarabo@ineco.com",
                telefono: "967539503"
            },
            {
                ubicacion: "CRC Albacete",
                nombre: "Isabel María García Morote",
                puesto: "Operador Telemando",
                correo: "isabel.garcia@ineco.com",
                telefono: "967539503"
            },
            {
                ubicacion: "CRC Albacete",
                nombre: "Vicent Moreno",
                puesto: "Operador Telemando",
                correo: "vicent.moreno@ineco.com",
                telefono: "967539503"
            },
            {
                ubicacion: "CRC Albacete",
                nombre: "Jesús Gómez Castillo",
                puesto: "Operador Telemando",
                correo: "jesus.castillo@ineco.com",
                telefono: "967539503"
            },  
            {
                ubicacion: "CRC Albacete",
                        nombre: "Pedro Juan Valero Escribano",
                        puesto: "GTM",
                        correo: "pedro.valero@ineco.com",
                        telefono: "663938853"
                    },
                    {
                        ubicacion: "CRC Albacete",
                        nombre: "María Jesús Bausela Porrero",
                        puesto: "GTM",
                        correo: "maria.bausela@ineco.com",
                        telefono: "647957307"
                    },
                     

        ];

        // Ajustar el zoom inicial del navegador
        document.body.style.zoom = '90%';

        // Función para determinar la empresa del trabajador
        function getEmpresa(correo) {
            if (correo.includes('@ineco.com')) return 'ineco';
            if (correo.includes('@adif.es')) return 'adif';
            return 'adif'; // Por defecto ADIF si no se especifica
        }

        // Función para renderizar los contactos
        function renderContacts(filteredContacts = contacts) {
            const container = document.getElementById('contactsContainer');
            container.innerHTML = '';

            // Agrupar contactos por ubicación
            const groupedContacts = filteredContacts.reduce((acc, contact) => {
                if (!acc[contact.ubicacion]) {
                    acc[contact.ubicacion] = [];
                }
                // Si es Mario García Aguado, lo insertamos al principio
                if (contact.nombre === "Mario García Aguado") {
                    acc[contact.ubicacion].unshift(contact);
                } else {
                    acc[contact.ubicacion].push(contact);
                }
                return acc;
            }, {});
            
            const sortedLocations = Object.keys(groupedContacts).sort();
            
            sortedLocations.forEach(location => {
                const locationHeader = document.createElement('div');
                locationHeader.className = 'location-header p-4 rounded-lg shadow-md mb-6 cursor-pointer';
                locationHeader.innerHTML = `
                    <h3 class="text-xl font-bold text-white">${location}</h3>
                    <p class="text-white opacity-80">${groupedContacts[location].length} contacto${groupedContacts[location].length !== 1 ? 's' : ''}</p>
                `;
                container.appendChild(locationHeader);
                
                const contactsGrid = document.createElement('div');
                contactsGrid.className = 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-10';
                
                // Ordenar contactos por nombre, manteniendo a Mario al principio si existe
                if (groupedContacts[location][0]?.nombre === "Mario García Aguado") {
                    const mario = groupedContacts[location].shift();
                    const sortedContacts = groupedContacts[location].sort((a, b) => a.nombre.localeCompare(b.nombre));
                    groupedContacts[location].unshift(mario);
                } else {
                    groupedContacts[location].sort((a, b) => a.nombre.localeCompare(b.nombre));
                }
                
                groupedContacts[location].forEach(contact => {
                    const contactCard = document.createElement('div');
                    contactCard.className = `contact-card ${getEmpresa(contact.correo)} bg-white p-6 rounded-lg shadow-sm animate-fade-in`;
                    contactCard.innerHTML = `
                        <div class="flex items-start">
                            <div class="rounded-full w-12 h-12 flex items-center justify-center mr-4 ${getEmpresa(contact.correo) === 'adif' ? 'bg-[#008080]' : 'bg-[#2196F3]'}">
                                <i class="fas fa-user text-xl text-white"></i>
                            </div>
                            <div class="company-logo ${getEmpresa(contact.correo) === 'adif' ? 'adif-logo' : 'ineco-logo'}"></div>
                            <div class="contact-info">
                                <div class="contact-name">${contact.nombre}</div>
                                <div class="contact-position">${contact.puesto}</div>
                                <div class="contact-details">
                                    <div class="flex flex-wrap gap-2 mt-2">
                                        <span class="contact-badge ${getEmpresa(contact.correo) === 'adif' ? 'badge-adif' : 'badge-ineco'}">${getEmpresa(contact.correo).toUpperCase()}</span>
                                        <span class="contact-badge badge-ineco">${contact.ubicacion}</span>
                                    </div>
                                    <div class="mt-2">
                                        <i class="fas fa-envelope text-gray-500 mr-1"></i>
                                        <a href="mailto:${contact.correo}" class="text-blue-600 hover:text-blue-800">${contact.correo}</a>
                                    </div>
                                    <div>
                                        <i class="fas fa-phone text-gray-500 mr-1"></i>
                                        <span>${contact.telefono}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                    contactsGrid.appendChild(contactCard);
                });
                
                container.appendChild(contactsGrid);
            });
        }

        renderContacts();

        // Inicializar autocompletado
        const autoCompleteInstance = new autoComplete({
            data: {
                src: function(term, suggest) {
                    const suggestions = contacts.filter(contact => {
                        const normalize = (text) => text.normalize('NFD').replace(/[̀-ͯ]/g, '').toLowerCase();
                        const searchTerm = normalize(term);
                        return normalize(contact.nombre).includes(searchTerm) ||
                               normalize(contact.puesto).includes(searchTerm) ||
                               normalize(contact.ubicacion).includes(searchTerm) ||
                               contact.telefono.includes(searchTerm);
                    }).map(contact => ({
                        value: contact.nombre,
                        text: `${contact.nombre} - ${contact.puesto}`
                    }));
                    suggest(suggestions);
                }
            },
            selector: '#searchInput',
            threshold: 1,
            debounce: 300,
            highlight: true,
            maxResults: 10,
            onSelection: function(e, term, item) {
                // Limpiamos el input y aplicamos el filtro
                searchInput.value = term.value;
                filterContacts();
                // Actualizar el botón de limpiar inmediatamente
                toggleClearButton();
            },
            searchEngine: "strict"
        });

        const searchInput = document.getElementById('searchInput');
        const clearSearch = document.getElementById('clearSearch');
        
        // Aseguramos que el botón esté visible inicialmente
        clearSearch.style.display = 'flex';

        // Mostrar/ocultar botón de limpiar según si hay texto
        function toggleClearButton() {
            if (searchInput.value.trim()) {
                clearSearch.style.display = 'flex';
                clearSearch.style.opacity = '1';
            } else {
                clearSearch.style.display = 'flex';
                clearSearch.style.opacity = '0';
            }
        }

        searchInput.addEventListener('input', toggleClearButton);
        
        // Limpiar búsqueda
        clearSearch.addEventListener('click', () => {
            searchInput.value = '';
            toggleClearButton();
            filterContacts();
        });

        // Actualizar el botón de limpiar cuando se selecciona un filtro predefinido
        document.querySelectorAll('.search-suggestion').forEach(button => {
            button.addEventListener('click', () => {
                toggleClearButton();
            });
        });

        // Inicializar estado del botón
        toggleClearButton();
        const locationFilter = document.getElementById('locationFilter');

        function filterContacts() {
            // Obtenemos el término de búsqueda directamente del input
            const searchTerm = searchInput.value.trim();
            const locationTerm = locationFilter.value;
            
            const filtered = contacts.filter(contact => {
                // Primero filtramos por ubicación
                const locationMatch = locationTerm === '' || contact.ubicacion === locationTerm;
                
                // Si no hay término de búsqueda, mostramos todos los que coincidan con la ubicación
                if (!searchTerm) return locationMatch;
                
                // Para el filtro INECO, mostramos todos los contactos de INECO que coincidan con la ubicación
                if (searchTerm.toLowerCase() === 'ineco') {
                    return locationMatch && contact.correo.includes('@ineco.com');
                }
                
                // Para el filtro ADIF, mostramos todos los contactos de ADIF que coincidan con la ubicación
                if (searchTerm.toLowerCase() === 'adif') {
                    return locationMatch && contact.correo.includes('@adif.es');
                }
                
                // Para otros términos de búsqueda, aplicamos la búsqueda normal
                const normalize = (text) => text.normalize('NFD').replace(/[̀-ͯ]/g, '').toLowerCase();
                
                return locationMatch && (
                    normalize(contact.nombre).includes(normalize(searchTerm)) ||
                    (normalize(searchTerm) === 'teleco' && contact.puesto === 'Técnico Telecomunicaciones') ||
                    (normalize(searchTerm) === 'ii.ss.' && contact.puesto === 'Técnico II.SS.') ||
                    normalize(contact.puesto).includes(normalize(searchTerm)) ||
                    normalize(contact.ubicacion).includes(normalize(searchTerm)) ||
                    normalize(contact.telefono).includes(normalize(searchTerm))
                );
            });

            // Ordenar primero por empresa y luego por nombre
            filtered.sort((a, b) => {
                const empresaA = getEmpresa(a.correo);
                const empresaB = getEmpresa(b.correo);
                
                // Primero por empresa
                if (empresaA !== empresaB) {
                    return empresaA === 'adif' ? -1 : 1;
                }
                
                // Luego por nombre
                return a.nombre.localeCompare(b.nombre);
            });

            // Ordenar dentro de cada ubicación
            const groupedContacts = filtered.reduce((acc, contact) => {
                if (!acc[contact.ubicacion]) {
                    acc[contact.ubicacion] = [];
                }
                acc[contact.ubicacion].push(contact);
                return acc;
            }, {});

            // Ordenar cada grupo de ubicación
            Object.keys(groupedContacts).forEach(location => {
                groupedContacts[location].sort((a, b) => {
                    // Primero por empresa
                    if (a.empresa !== b.empresa) {
                        return a.empresa === 'ADIF' ? -1 : 1;
                    }
                    
                    // Luego por nombre
                    return a.nombre.localeCompare(b.nombre);
                });
            });
            
            renderContacts(filtered);
        }

        searchInput.addEventListener('input', filterContacts);
        locationFilter.addEventListener('change', filterContacts);

        document.querySelectorAll('.search-suggestion').forEach(button => {
            button.addEventListener('click', () => {
                searchInput.value = button.textContent;
                filterContacts();
            });
        });
    </script>
</body>
</html>
